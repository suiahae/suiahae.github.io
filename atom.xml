<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Qianying&#39;s Balcony</title>
  
  <subtitle>浅影/棈桜的阳台/博客</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://suiahae.me/"/>
  <updated>2021-04-25T10:02:50.937Z</updated>
  <id>https://suiahae.me/</id>
  
  <author>
    <name>Qianying</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>conda 使用指南</title>
    <link href="https://suiahae.me/conda-commands/"/>
    <id>https://suiahae.me/conda-commands/</id>
    <published>2019-11-27T14:34:23.000Z</published>
    <updated>2021-04-25T10:02:50.937Z</updated>
    
    <content type="html"><![CDATA[<h2 id="conda-commands-™"><a href="#conda-commands-™" class="headerlink" title="conda commands ™"></a><a href="https://docs.conda.io/en/latest/" target="_blank" rel="noopener">conda commands ™</a></h2><p><strong>注意！</strong> 尖括号“&lt;&gt;”内的参数为必给参数，方括号“[]”内的参数为可选参数。</p><hr><h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><h3 id="data-2021-04-25"><a href="#data-2021-04-25" class="headerlink" title="data: 2021-04-25"></a>data: 2021-04-25</h3><ol><li><p><strong>Added</strong></p><ul><li>添加“conda 环境回滚”和“移动/共享 conda 环境”的命令</li></ul></li><li><p><strong>Fixed</strong></p><ul><li><p>修复了原本残缺的卸载方案</p></li><li><p>依照 markdownlint 规则修正了文中的 Markdown 语法错误</p></li></ul></li></ol><h3 id="date-2020-02-23"><a href="#date-2020-02-23" class="headerlink" title="date: 2020-02-23"></a>date: 2020-02-23</h3><ol><li><p><strong>Added</strong></p><ul><li>添加“降级/重新安装特定版本库”的说明</li></ul></li><li><p><strong>Fixed</strong></p><ul><li>使代码更易复制</li></ul></li></ol><h3 id="date-2020-01-07"><a href="#date-2020-01-07" class="headerlink" title="date: 2020-01-07"></a>date: 2020-01-07</h3><ol><li><p><strong>Added</strong></p><ul><li>添加“如何更换conda和pip镜像源”的说明</li></ul></li></ol><hr><h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><p>anaconda过于臃肿，绝大多数默认包并不会被使用，<strong>强烈推荐使用miniconda</strong>。</p><p>推荐下载地址：</p><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">Tsinghua Open Source Mirror</a>  <a href="https://mirrors6.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">IPV6</a></li><li><a href="http://mirrors.ustc.edu.cn/" target="_blank" rel="noopener">USTC Open Source Software Mirror</a>  <a href="http://ipv6.mirrors.ustc.edu.cn/" target="_blank" rel="noopener">IPV6</a></li></ul><h3 id="1-1-Linux"><a href="#1-1-Linux" class="headerlink" title="1.1. Linux"></a>1.1. Linux</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./&lt;file-name&gt;.sh</span><br><span class="line"><span class="comment"># yes+回车 </span></span><br><span class="line"><span class="comment"># 重启终端</span></span><br></pre></td></tr></table></figure><p>如果选择了<code>conda init</code>初始化，可通过以下命令取消默认激活环境 base</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="1-2-Windows"><a href="#1-2-Windows" class="headerlink" title="1.2. Windows"></a>1.2. Windows</h3><p>直接双击exe文件，然后根据安装向导进行安装</p><h2 id="2-卸载"><a href="#2-卸载" class="headerlink" title="2. 卸载"></a>2. 卸载</h2><p><a href="https://docs.anaconda.com/anaconda/install/uninstall/" target="_blank" rel="noopener">https://docs.anaconda.com/anaconda/install/uninstall/</a></p><h3 id="2-1-Option-A-简单卸载"><a href="#2-1-Option-A-简单卸载" class="headerlink" title="2.1. Option A. 简单卸载"></a>2.1. Option A. 简单卸载</h3><ul><li><p>Linux</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除 conda 安装目录，例如</span></span><br><span class="line">rm -rf ~/miniconda3</span><br></pre></td></tr></table></figure></li><li><p>Windows</p><ol><li><p>使用 Windows 资源管理器删除安装根目录中的 envs 和 pkgs 文件夹</p></li><li><p>计算机控制面板-&gt;程序与应用-&gt;卸载</p></li></ol></li></ul><h3 id="2-2-Option-B-使用-Anaconda-Clean-完全卸载"><a href="#2-2-Option-B-使用-Anaconda-Clean-完全卸载" class="headerlink" title="2.2. Option B. 使用 Anaconda-Clean 完全卸载"></a>2.2. Option B. 使用 Anaconda-Clean 完全卸载</h3><blockquote><p>必须先运行 Anaconda-Clean，然后才能使用 Option A 简单删除</p></blockquote><ol><li><p>安装 anaconda-clean</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install anaconda-clean</span><br></pre></td></tr></table></figure></li><li><p>运行 anaconda-clean 删除所有与 Anaconda 相关的文件和目录</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 需要确认</span></span><br><span class="line">anaconda-clean</span><br><span class="line"><span class="comment">## 无需确认</span></span><br><span class="line">anaconda-clean --yes</span><br></pre></td></tr></table></figure></li><li><p>使用Anaconda-Clean之后，请按照上述 Option A 中的说明卸载 Anaconda</p></li></ol><h3 id="2-3-最后，清理-bash-profile-zshrc-中有关-conda-的设置"><a href="#2-3-最后，清理-bash-profile-zshrc-中有关-conda-的设置" class="headerlink" title="2.3. 最后，清理 .bash_profile/.zshrc 中有关 conda 的设置"></a>2.3. 最后，清理 <code>.bash_profile</code>/<code>.zshrc</code> 中有关 conda 的设置</h3><h2 id="3-更换镜像源"><a href="#3-更换镜像源" class="headerlink" title="3. 更换镜像源"></a>3. 更换镜像源</h2><p>以清华镜像站为例，说明更换镜像源的方法</p><h3 id="3-1-更换conda镜像源"><a href="#3-1-更换conda镜像源" class="headerlink" title="3.1 更换conda镜像源"></a>3.1 更换conda镜像源</h3><p>各系统都可以通过修改用户目录下的 .condarc 文件:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">ssl_verify: true</span><br><span class="line">show_channel_urls: true</span><br><span class="line">default_channels:</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;main</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free</span><br><span class="line">  - https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;r</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  msys2: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  bioconda: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  menpo: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  pytorch: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br><span class="line">  simpleitk: https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;cloud</span><br></pre></td></tr></table></figure><ul><li><p>Windows下文件路径：<code>%HOMEPATH%\.condarc</code></p><p>若目录下无该文件，可先执行 <code>conda config</code> 生成该文件之后再修改。</p></li><li><p>Linux下文件路径：<code>~/.condarc</code></p></li></ul><h3 id="3-2-更换pip镜像源"><a href="#3-2-更换pip镜像源" class="headerlink" title="3.2 更换pip镜像源"></a>3.2 更换pip镜像源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h2 id="4-升级"><a href="#4-升级" class="headerlink" title="4. 升级"></a>4. 升级</h2><h3 id="4-1-方法一：切换到相应环境"><a href="#4-1-方法一：切换到相应环境" class="headerlink" title="4.1 方法一：切换到相应环境"></a>4.1 方法一：切换到相应环境</h3><p>首先切换到相应环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate &lt;envernment&gt;</span><br></pre></td></tr></table></figure><p>进行升级（conda 与其他包的升级是独立的）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级 conda</span></span><br><span class="line">conda update conda</span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级&lt;envernment&gt;环境下所有包</span></span><br><span class="line">conda update --all</span><br></pre></td></tr></table></figure><h3 id="4-2-方法二：通过参数-n指定环境"><a href="#4-2-方法二：通过参数-n指定环境" class="headerlink" title="4.2 方法二：通过参数-n指定环境"></a>4.2 方法二：通过参数<code>-n</code>指定环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例如，更新 base 环境下 python</span></span><br><span class="line">conda update -n base python</span><br></pre></td></tr></table></figure><h2 id="5-降级-安装指定版本"><a href="#5-降级-安装指定版本" class="headerlink" title="5. 降级 (安装指定版本)"></a>5. 降级 (安装指定版本)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install --force-reinstall tensorflow=1</span><br></pre></td></tr></table></figure><h2 id="6-conda-基本命令"><a href="#6-conda-基本命令" class="headerlink" title="6. conda 基本命令"></a>6. conda 基本命令</h2><h3 id="6-1-环境的操作"><a href="#6-1-环境的操作" class="headerlink" title="6.1 环境的操作"></a>6.1 环境的操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示所有的虚拟环境</span></span><br><span class="line">conda env list</span><br><span class="line">conda info --envs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建名为 env-name 的 python 虚拟环境并指定 python 版本为 3.7</span></span><br><span class="line">conda create -n &lt;env-name&gt; [python[=3.7]]</span><br><span class="line"><span class="comment"># 从旧环境中克隆</span></span><br><span class="line">conda create -n newname --<span class="built_in">clone</span> oldname</span><br><span class="line"><span class="comment"># 激活 env-name 环境</span></span><br><span class="line">conda activate &lt;env-name&gt;</span><br><span class="line"><span class="comment"># 回到默认环境</span></span><br><span class="line">conda deactivate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除env-name虚拟环境/需取消激活此环境</span></span><br><span class="line">conda remove -n &lt;env-name&gt; --all</span><br></pre></td></tr></table></figure><h3 id="6-2-环境内部包的操作"><a href="#6-2-环境内部包的操作" class="headerlink" title="6.2 环境内部包的操作"></a>6.2 环境内部包的操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看已经安装的包</span></span><br><span class="line">conda list</span><br><span class="line"><span class="comment"># 指定查看env-name虚拟环境下安装的package</span></span><br><span class="line">conda list -n &lt;env-name&gt;</span><br><span class="line"><span class="comment"># 安装 pack-name</span></span><br><span class="line">conda install &lt;pack-name&gt;</span><br><span class="line"><span class="comment"># 更新 pack-name</span></span><br><span class="line">conda update &lt;pack-name&gt;</span><br><span class="line"><span class="comment"># 卸载 pack-name</span></span><br><span class="line">conda uninstall &lt;pack-name&gt;</span><br></pre></td></tr></table></figure><h3 id="6-3-环境的重命名"><a href="#6-3-环境的重命名" class="headerlink" title="6.3 环境的重命名"></a>6.3 环境的重命名</h3><p>conda是没有重命名环境的功能, 要实现这个基本需求, 只能通过蠢蠢的<strong>克隆+删除</strong>来实现。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 克隆环境</span></span><br><span class="line">conda create -n newname --<span class="built_in">clone</span> oldname</span><br><span class="line"><span class="comment"># 删除旧环境</span></span><br><span class="line">conda remove -n oldname --all</span><br></pre></td></tr></table></figure><h2 id="7-conda-高级命令"><a href="#7-conda-高级命令" class="headerlink" title="7. conda 高级命令"></a>7. conda 高级命令</h2><h3 id="7-1-环境回滚-环境重置-修订历史"><a href="#7-1-环境回滚-环境重置-修订历史" class="headerlink" title="7.1 环境回滚/环境重置/修订历史"></a>7.1 环境回滚/环境重置/修订历史</h3><ol><li><p>激活相应环境</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate &lt;env-name&gt;</span><br></pre></td></tr></table></figure></li><li><p>列出环境 env-name 修订/修改历史</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修订版本号（REVISION）为括号中 rev 后面的阿拉伯数字，“0”表示初始版本。</span></span><br><span class="line">~]$ conda list --revisions</span><br><span class="line"></span><br><span class="line">输出实例：</span><br><span class="line"></span><br><span class="line">2021-01-01 00:00:00  (rev **0**)</span><br><span class="line">  +_libgcc_mutex-0.1</span><br><span class="line">  +ca-certificates-2020.1.1</span><br><span class="line">  +certifi-2020.4.5.1</span><br><span class="line">  +cffi-1.14.0</span><br><span class="line">  +chardet-3.0.4</span><br><span class="line">  +conda-4.8.3</span><br></pre></td></tr></table></figure></li><li><p>恢复到指定版本</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将修订版本号（REVISION）替换为所需版本号，“0”表示初始化当前环境</span></span><br><span class="line">conda install --revision REVISION</span><br></pre></td></tr></table></figure></li></ol><h3 id="7-2-移动-conda-环境"><a href="#7-2-移动-conda-环境" class="headerlink" title="7.2 移动 conda 环境"></a>7.2 移动 conda 环境</h3><p><a href="https://www.anaconda.com/blog/moving-conda-environments" target="_blank" rel="noopener">https://www.anaconda.com/blog/moving-conda-environments</a></p><p><a href="https://docs.conda.io/projects/conda/en/latest/commands/create.html" target="_blank" rel="noopener">https://docs.conda.io/projects/conda/en/latest/commands/create.html</a></p><p><a href="https://docs.conda.io/projects/conda/en/latest/commands/list.html" target="_blank" rel="noopener">https://docs.conda.io/projects/conda/en/latest/commands/list.html</a></p><p><a href="https://conda.github.io/conda-pack/" target="_blank" rel="noopener">https://conda.github.io/conda-pack/</a></p><p>指定需要操作的环境环境</p><ul><li><p>a. 激活环境然后操作</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate &lt;env-name&gt;</span><br></pre></td></tr></table></figure></li><li><p>b. 或通过 -n 指定环境，例如：<code>conda list -n &lt;env-name&gt;</code></p></li></ul><h4 id="7-2-1-Option-A-列出环境中所有已安装的包及相应版本，使用-YAML-格式（推荐）"><a href="#7-2-1-Option-A-列出环境中所有已安装的包及相应版本，使用-YAML-格式（推荐）" class="headerlink" title="7.2.1. Option A. 列出环境中所有已安装的包及相应版本，使用 YAML 格式（推荐）"></a>7.2.1. Option A. 列出环境中所有已安装的包及相应版本，使用 YAML 格式（推荐）</h4><p>特点：平台&amp;操作系统无关、不指定镜像源、仅导出包列表/恢复时需要联网、包含 pip 包、YAML 格式化</p><ul><li><p>导出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env <span class="built_in">export</span> &gt; environment.yml</span><br></pre></td></tr></table></figure></li><li><p>恢复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env create -f environment.yml</span><br></pre></td></tr></table></figure></li></ul><h4 id="7-2-2-Option-B-列出环境中所有已安装的包及相应版本，并导出至文件"><a href="#7-2-2-Option-B-列出环境中所有已安装的包及相应版本，并导出至文件" class="headerlink" title="7.2.2. Option B. 列出环境中所有已安装的包及相应版本，并导出至文件"></a>7.2.2. Option B. 列出环境中所有已安装的包及相应版本，并导出至文件</h4><p>特点：平台&amp;操作系统无关、不指定镜像源、仅导出包列表/恢复时需要联网、包含 pip 包</p><ul><li><p>导出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list --<span class="built_in">export</span> &gt; package-list.txt</span><br></pre></td></tr></table></figure></li><li><p>恢复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n &lt;env-name&gt; --file &lt;file&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="7-2-3-Option-C-将环境打包存档"><a href="#7-2-3-Option-C-将环境打包存档" class="headerlink" title="7.2.3. Option C. 将环境打包存档"></a>7.2.3. Option C. 将环境打包存档</h4><p>特点：平台&amp;操作系统相关、指定镜像源、二进制文件打包/恢复时无需联网、打包时需要额外工具</p><ul><li><p>在 root/base 环境下安装 conda-pack</p><ul><li><p>conda-forge:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge conda-pack</span><br></pre></td></tr></table></figure></li><li><p>PyPI:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install conda-pack</span><br></pre></td></tr></table></figure></li></ul></li><li><p>打包</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将环境 my_env 打包至 my_env.tar.gz</span></span><br><span class="line">conda pack -n my_env</span><br><span class="line"><span class="comment"># 将环境 my_env 打包至 out_name.tar.gz</span></span><br><span class="line">conda pack -n my_env -o out_name.tar.gz</span><br><span class="line"><span class="comment"># 或者用路径指定需要打包的环境</span></span><br><span class="line">conda pack -p /explicit/path/to/my_env</span><br></pre></td></tr></table></figure></li><li><p>安装</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将环境解包至`my_env`目录</span></span><br><span class="line">$ mkdir -p my_env</span><br><span class="line">$ tar -xzf my_env.tar.gz -C my_env</span><br><span class="line"></span><br><span class="line"><span class="comment"># 无需激活/修复前缀（prefixes）即可使用 python，大多数库将正常工作</span></span><br><span class="line"><span class="comment"># 但需要清理前缀的将会失败</span></span><br><span class="line"><span class="comment"># ps. 前缀指 conda 环境的绝对路径等</span></span><br><span class="line"><span class="comment">#     清理前缀大概指整顿 conda 环境路径</span></span><br><span class="line">$ ./my_env/bin/python</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境，这会暂时将`my_env/bin`添加至环境变量`$PATH`中</span></span><br><span class="line">$ <span class="built_in">source</span> my_env/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在环境中运行 Python</span></span><br><span class="line">(my_env) $ python</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在活动环境中清理前缀</span></span><br><span class="line"><span class="comment"># 注意，此命令也可以在不激活环境的情况下运行</span></span><br><span class="line"><span class="comment"># 只要机器上已经安装了某些版本的 Python</span></span><br><span class="line">(my_env) $ conda-unpack</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时，环境就像您直接使用conda在此处安装该环境一样,</span></span><br><span class="line"><span class="comment"># 所有脚本都可以正常工作。</span></span><br><span class="line">(my_env) $ ipython --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停用环境以将其从路径中删除</span></span><br><span class="line">(my_env) $ <span class="built_in">source</span> my_env/bin/deactivate</span><br></pre></td></tr></table></figure></li></ul><h4 id="7-2-4-Option-D-以-URL-的形式将已安装-conda-包列表导出至文件"><a href="#7-2-4-Option-D-以-URL-的形式将已安装-conda-包列表导出至文件" class="headerlink" title="7.2.4. Option D. 以 URL 的形式将已安装 conda 包列表导出至文件"></a>7.2.4. Option D. 以 URL 的形式将已安装 conda 包列表导出至文件</h4><p>特点：平台&amp;操作系统相关、指定镜像源、仅导出包列表/恢复时需要联网、仅包含 conda 包/不包含 pip 包</p><ul><li><p>导出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list --explicit &gt; package-list-explicit-file-for-create.txt</span><br></pre></td></tr></table></figure></li><li><p>恢复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n &lt;env-name&gt; --file &lt;file&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="8-清理"><a href="#8-清理" class="headerlink" title="8. 清理"></a>8. 清理</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除没用的包</span></span><br><span class="line">conda clean -p</span><br><span class="line"><span class="comment"># 删除tar包</span></span><br><span class="line">conda clean -t</span><br><span class="line"><span class="comment"># 删除所有的安装包及cache/慎用</span></span><br><span class="line">conda clean -y -all</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;conda-commands-™&quot;&gt;&lt;a href=&quot;#conda-commands-™&quot; class=&quot;headerlink&quot; title=&quot;conda commands ™&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://docs.conda.io/en/late
      
    
    </summary>
    
    
      <category term="Handbooks" scheme="https://suiahae.me/categories/Handbooks/"/>
    
      <category term="conda" scheme="https://suiahae.me/categories/Handbooks/conda/"/>
    
    
      <category term="conda" scheme="https://suiahae.me/tags/conda/"/>
    
      <category term="anaconda" scheme="https://suiahae.me/tags/anaconda/"/>
    
  </entry>
  
</feed>
